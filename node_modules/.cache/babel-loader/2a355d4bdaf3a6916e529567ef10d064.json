{"ast":null,"code":"import axios from \"axios\";\nimport { createAsyncThunk } from '@reduxjs/toolkit';\naxios.defaults.baseURL = 'https://pets-rest-api.onrender.com/';\n\nconst setAuthHeader = token => {\n  axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\n\nconst clearAuthHeader = () => {\n  axios.defaults.headers.common.Authorization = '';\n};\n\nexport const register = createAsyncThunk(\"auth/register\", async (credentials, thunkAPI) => {\n  try {\n    const response = await axios.post('/users/signup', credentials);\n    setAuthHeader(response.data.token);\n    return response.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.messsage);\n  }\n});\nexport const login = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\n  try {\n    const response = await axios.post('/users/login', credentials);\n    setAuthHeader(response.data.token);\n    return response.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\nexport const logOut = createAsyncThunk(\"auth/logout\", async (_, thunkAPI) => {\n  try {\n    const response = await axios.post('/auth/logout');\n    clearAuthHeader();\n    return response.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.messsage);\n  }\n});","map":{"version":3,"sources":["C:/Users/Comp/Desktop/GOIT/HW-01/react/group_project_6_final/src/redux/auth/operations.js"],"names":["axios","createAsyncThunk","defaults","baseURL","setAuthHeader","token","headers","common","Authorization","clearAuthHeader","register","credentials","thunkAPI","response","post","data","error","rejectWithValue","messsage","login","message","logOut","_"],"mappings":"AAAA,OAAQA,KAAR,MAAoB,OAApB;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AAGAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyB,qCAAzB;;AAGA,MAAMC,aAAa,GAAGC,KAAK,IAAI;AAC3BL,EAAAA,KAAK,CAACE,QAAN,CAAeI,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA+C,UAASH,KAAM,EAA9D;AACH,CAFD;;AAIA,MAAMI,eAAe,GAAG,MAAM;AAC1BT,EAAAA,KAAK,CAACE,QAAN,CAAeI,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA8C,EAA9C;AACH,CAFD;;AAKA,OAAO,MAAME,QAAQ,GAAGT,gBAAgB,CACpC,eADoC,EAEpC,OAAOU,WAAP,EAAoBC,QAApB,KAAiC;AAC7B,MAAI;AACA,UAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAW,eAAX,EAA4BH,WAA5B,CAAvB;AACAP,IAAAA,aAAa,CAACS,QAAQ,CAACE,IAAT,CAAcV,KAAf,CAAb;AACA,WAAOQ,QAAQ,CAACE,IAAhB;AACH,GAJD,CAIE,OAAOC,KAAP,EAAc;AACZ,WAAOJ,QAAQ,CAACK,eAAT,CAAyBD,KAAK,CAACE,QAA/B,CAAP;AACH;AACJ,CAVmC,CAAjC;AAaP,OAAO,MAAMC,KAAK,GAAGlB,gBAAgB,CAAC,YAAD,EAAe,OAAOU,WAAP,EAAoBC,QAApB,KAAiC;AACjF,MAAI;AACA,UAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAW,cAAX,EAA2BH,WAA3B,CAAvB;AACAP,IAAAA,aAAa,CAACS,QAAQ,CAACE,IAAT,CAAcV,KAAf,CAAb;AACA,WAAOQ,QAAQ,CAACE,IAAhB;AACH,GAJD,CAIE,OAAOC,KAAP,EAAc;AACZ,WAAOJ,QAAQ,CAACK,eAAT,CAAyBD,KAAK,CAACI,OAA/B,CAAP;AACH;AACJ,CARoC,CAA9B;AAUP,OAAO,MAAMC,MAAM,GAAGpB,gBAAgB,CAAC,aAAD,EAAgB,OAAOqB,CAAP,EAAUV,QAAV,KAAuB;AACzE,MAAI;AACA,UAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAW,cAAX,CAAvB;AACAL,IAAAA,eAAe;AACf,WAAOI,QAAQ,CAACE,IAAhB;AACH,GAJD,CAIE,OAAOC,KAAP,EAAc;AACZ,WAAOJ,QAAQ,CAACK,eAAT,CAAyBD,KAAK,CAACE,QAA/B,CAAP;AACH;AACJ,CARqC,CAA/B","sourcesContent":["import  axios  from \"axios\"\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n\r\naxios.defaults.baseURL = 'https://pets-rest-api.onrender.com/'\r\n\r\n\r\nconst setAuthHeader = token => { \r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`\r\n}\r\n\r\nconst clearAuthHeader = () => {\r\n    axios.defaults.headers.common.Authorization = '';\r\n}\r\n\r\n\r\nexport const register = createAsyncThunk(\r\n    \"auth/register\", \r\n    async (credentials, thunkAPI) => { \r\n        try {\r\n            const response = await axios.post('/users/signup', credentials)\r\n            setAuthHeader(response.data.token)\r\n            return response.data\r\n        } catch (error) {\r\n            return thunkAPI.rejectWithValue(error.messsage)\r\n        }\r\n    }\r\n)\r\n\r\nexport const login = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\r\n    try {\r\n        const response = await axios.post('/users/login', credentials);\r\n        setAuthHeader(response.data.token);\r\n        return response.data\r\n    } catch (error) {\r\n        return thunkAPI.rejectWithValue(error.message);\r\n    }\r\n});\r\n\r\nexport const logOut = createAsyncThunk(\"auth/logout\", async (_, thunkAPI) => {\r\n    try {\r\n        const response = await axios.post('/auth/logout');\r\n        clearAuthHeader();\r\n        return response.data;\r\n    } catch (error) {\r\n        return thunkAPI.rejectWithValue(error.messsage);\r\n    }\r\n})\r\n\r\n"]},"metadata":{},"sourceType":"module"}